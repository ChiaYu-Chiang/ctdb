{% extends "base.html" %}
{% load i18n %}
{% block content %}
<section class="content">
  <div class="container-fluid max-w-24u">
    <div class="row pt-navbar pb-footer-foot justify-content-center align-items-center min-vh-100">
      <div class="col">
        <div id='calendar'></div>
      </div>
    </div>
  </div>
</section>

  <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.js"></script>
  <script src='https://cdn.jsdelivr.net/npm/@fullcalendar/core@6.1.8/locales-all.global.min.js'></script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const calendarEl = document.getElementById('calendar');
      const calendar = new FullCalendar.Calendar(calendarEl, {
        initialView: 'dayGridMonth',
        locale: 'zh-tw',
        headerToolbar: {
          left: 'prev,next today addEventButton',
          center: 'title',
          right: 'dayGridMonth,timeGridWeek,timeGridDay'
        },
        customButtons: {
          addEventButton: {
            text: '{% trans "Add" %}',
            click: function() {
              window.location.href = '{% url "dep_calendar:event_create" %}';
            }
          }
        },
        buttonText: {
          today: "{% trans 'today' %}",
          month: "{% trans 'month' %}",
          week: "{% trans 'week' %}",
          day: "{% trans 'day' %}"
        },
        events: '{% url "dep_calendar:calendar_events_json" %}',
        eventClick: function(info) {
          window.location.href = '/dep_calendar/event/' + info.event.id + '/';
        },
        eventMouseEnter: function(info) {
          info.el.style.cursor = 'pointer';
          info.el.title = 'click to view details';
        },
        height: 'auto',
        dayMaxEvents: true,
        moreLinkClick: 'popover'
      });
      calendar.render();
    });
  </script>
{% endblock %}